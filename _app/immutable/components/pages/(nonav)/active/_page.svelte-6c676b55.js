import{S as O,i as Q,s as X,x as P,a as A,k as W,q,y as N,c as I,l as D,m as F,r as E,h as g,n as L,z as S,b as k,H as B,f as v,d as G,t as y,A as H,ac as J,u as M,g as K}from"../../../../chunks/index-3379f9a6.js";import{g as C}from"../../../../chunks/navigation-c104e2f6.js";import{B as z}from"../../../../chunks/Button-cc456d85.js";import{g as Y}from"../../../../chunks/progress-507cca45.js";import{B as Z}from"../../../../chunks/BackBanner-2f78444f.js";import{d as x}from"../../../../chunks/db-4875eabb.js";import{W as ee}from"../../../../chunks/program-8bd059cb.js";function T(a,e,n){const o=a.slice();return o[11]=e[n],o[13]=n,o}function U(a,e,n){const o=a.slice();o[14]=e[n],o[17]=n;const r=o[1][o[13]][o[17]];return o[15]=r,o}function te(a){let e;return{c(){e=q("Finish")},l(n){e=E(n,"Finish")},m(n,o){k(n,e,o)},d(n){n&&g(e)}}}function oe(a){let e,n;return e=new z({props:{$$slots:{default:[te]},$$scope:{ctx:a}}}),e.$on("click",a[3]),{c(){P(e.$$.fragment)},l(o){N(e.$$.fragment,o)},m(o,r){S(e,o,r),n=!0},p(o,r){const $={};r&262144&&($.$$scope={dirty:r,ctx:o}),e.$set($)},i(o){n||(v(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){H(e,o)}}}function ne(a){let e=a[2](a[11].exercise)+"",n;return{c(){n=q(e)},l(o){n=E(o,e)},m(o,r){k(o,n,r)},p(o,r){r&1&&e!==(e=o[2](o[11].exercise)+"")&&M(n,e)},d(o){o&&g(n)}}}function se(a){let e=(a[15]==0?a[14]:a[15])+"",n;return{c(){n=q(e)},l(o){n=E(o,e)},m(o,r){k(o,n,r)},p(o,r){r&3&&e!==(e=(o[15]==0?o[14]:o[15])+"")&&M(n,e)},d(o){o&&g(n)}}}function V(a){let e,n;function o(){return a[4](a[13],a[17],a[15],a[14])}return e=new z({props:{color:a[15]==0?"secondary":"primary",variant:"unelevated",class:"btn-round",$$slots:{default:[se]},$$scope:{ctx:a}}}),e.$on("click",o),{c(){P(e.$$.fragment)},l(r){N(e.$$.fragment,r)},m(r,$){S(e,r,$),n=!0},p(r,$){a=r;const m={};$&2&&(m.color=a[15]==0?"secondary":"primary"),$&262147&&(m.$$scope={dirty:$,ctx:a}),e.$set(m)},i(r){n||(v(e.$$.fragment,r),n=!0)},o(r){y(e.$$.fragment,r),n=!1},d(r){H(e,r)}}}function re(a){let e;return{c(){e=q("+")},l(n){e=E(n,"+")},m(n,o){k(n,e,o)},d(n){n&&g(e)}}}function j(a){let e,n,o=a[11].exercise.name+"",r,$,m,d,u,h,p,c;m=new z({props:{color:"secondary",variant:"text",$$slots:{default:[ne]},$$scope:{ctx:a}}});let w=a[11].sets,t=[];for(let s=0;s<w.length;s+=1)t[s]=V(U(a,w,s));const l=s=>y(t[s],1,1,()=>{t[s]=null});return p=new z({props:{color:"secondary",variant:"unelevated",class:"btn-round",$$slots:{default:[re]},$$scope:{ctx:a}}}),{c(){e=W("h2"),n=W("span"),r=q(o),$=A(),P(m.$$.fragment),d=A(),u=W("div");for(let s=0;s<t.length;s+=1)t[s].c();h=A(),P(p.$$.fragment),this.h()},l(s){e=D(s,"H2",{class:!0});var f=F(e);n=D(f,"SPAN",{class:!0});var i=F(n);r=E(i,o),i.forEach(g),$=I(f),N(m.$$.fragment,f),f.forEach(g),d=I(s),u=D(s,"DIV",{class:!0});var b=F(u);for(let _=0;_<t.length;_+=1)t[_].l(b);h=I(b),N(p.$$.fragment,b),b.forEach(g),this.h()},h(){L(n,"class","long svelte-1vflaq3"),L(e,"class","svelte-1vflaq3"),L(u,"class","row svelte-1vflaq3")},m(s,f){k(s,e,f),B(e,n),B(n,r),B(e,$),S(m,e,null),k(s,d,f),k(s,u,f);for(let i=0;i<t.length;i+=1)t[i].m(u,null);B(u,h),S(p,u,null),c=!0},p(s,f){(!c||f&1)&&o!==(o=s[11].exercise.name+"")&&M(r,o);const i={};if(f&262145&&(i.$$scope={dirty:f,ctx:s}),m.$set(i),f&3){w=s[11].sets;let _;for(_=0;_<w.length;_+=1){const R=U(s,w,_);t[_]?(t[_].p(R,f),v(t[_],1)):(t[_]=V(R),t[_].c(),v(t[_],1),t[_].m(u,h))}for(K(),_=w.length;_<t.length;_+=1)l(_);G()}const b={};f&262144&&(b.$$scope={dirty:f,ctx:s}),p.$set(b)},i(s){if(!c){v(m.$$.fragment,s);for(let f=0;f<w.length;f+=1)v(t[f]);v(p.$$.fragment,s),c=!0}},o(s){y(m.$$.fragment,s),t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)y(t[f]);y(p.$$.fragment,s),c=!1},d(s){s&&g(e),H(m),s&&g(d),s&&g(u),J(t,s),H(p)}}}function le(a){let e;return{c(){e=q("10kg")},l(n){e=E(n,"10kg")},m(n,o){k(n,e,o)},d(n){n&&g(e)}}}function ae(a){let e,n,o,r,$,m,d,u,h;e=new Z({props:{href:"/work",title:a[0].name,$$slots:{default:[oe]},$$scope:{ctx:a}}});let p=a[0].work,c=[];for(let t=0;t<p.length;t+=1)c[t]=j(T(a,p,t));const w=t=>y(c[t],1,1,()=>{c[t]=null});return u=new z({props:{color:"primary",variant:"text",$$slots:{default:[le]},$$scope:{ctx:a}}}),{c(){P(e.$$.fragment),n=A();for(let t=0;t<c.length;t+=1)c[t].c();o=A(),r=W("h2"),$=W("span"),m=q("Bodyweight"),d=A(),P(u.$$.fragment),this.h()},l(t){N(e.$$.fragment,t),n=I(t);for(let f=0;f<c.length;f+=1)c[f].l(t);o=I(t),r=D(t,"H2",{class:!0});var l=F(r);$=D(l,"SPAN",{class:!0});var s=F($);m=E(s,"Bodyweight"),s.forEach(g),d=I(l),N(u.$$.fragment,l),l.forEach(g),this.h()},h(){L($,"class","long svelte-1vflaq3"),L(r,"class","svelte-1vflaq3")},m(t,l){S(e,t,l),k(t,n,l);for(let s=0;s<c.length;s+=1)c[s].m(t,l);k(t,o,l),k(t,r,l),B(r,$),B($,m),B(r,d),S(u,r,null),h=!0},p(t,[l]){const s={};if(l&1&&(s.title=t[0].name),l&262144&&(s.$$scope={dirty:l,ctx:t}),e.$set(s),l&7){p=t[0].work;let i;for(i=0;i<p.length;i+=1){const b=T(t,p,i);c[i]?(c[i].p(b,l),v(c[i],1)):(c[i]=j(b),c[i].c(),v(c[i],1),c[i].m(o.parentNode,o))}for(K(),i=p.length;i<c.length;i+=1)w(i);G()}const f={};l&262144&&(f.$$scope={dirty:l,ctx:t}),u.$set(f)},i(t){if(!h){v(e.$$.fragment,t);for(let l=0;l<p.length;l+=1)v(c[l]);v(u.$$.fragment,t),h=!0}},o(t){y(e.$$.fragment,t),c=c.filter(Boolean);for(let l=0;l<c.length;l+=1)y(c[l]);y(u.$$.fragment,t),h=!1},d(t){H(e,t),t&&g(n),J(c,t),t&&g(o),t&&g(r),H(u)}}}function fe(a,e,n){const o={name:"Loading...",work:[]},r={day:0,difficulty:new Map};let $,m;{let l=new URL(document.location.href).searchParams;$=l.get("program")||void 0,m=l.get("workout")||void 0}let d=o,u=r,h=[];return(async()=>{if(!m){console.error("No workout specified"),C("/work");return}const l=await ee.get(m);if(!d){console.error("Workout not found"),C("/work");return}n(0,d=l),u=Y(l),n(1,h=l.work.map(s=>s.sets.map(f=>0)))})(),[d,h,l=>l.difficulty(u==null?void 0:u.difficulty.get(l.id)),()=>{const l=new Date().getTime();for(const[s,f]of d.work.entries()){const i={time:l,programId:$,workoutId:m,exerciseId:f.exercise.id,difficulty:u.difficulty.get(f.exercise.id),sets:Int16Array.from(h[s])};x.history.add(i)}C("/work")},(l,s,f,i)=>n(1,h[l][s]=(f+i)%(i+1),h)]}class ge extends O{constructor(e){super(),Q(this,e,fe,ae,X,{})}}export{ge as default};
