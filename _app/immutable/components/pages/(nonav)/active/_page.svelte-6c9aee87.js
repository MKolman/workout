import{S as Q,i as X,s as Y,v as I,a6 as L,x as v,a as D,y as k,c as B,z as w,b,a7 as U,f as m,t as g,A as y,h as d,q,r as T,u as z,e as N,d as R,ad as Z,k as E,l as W,m as C,n as F,F as A,g as V}from"../../../../chunks/index-be4f0507.js";import{g as P}from"../../../../chunks/navigation-e792b297.js";import{B as H}from"../../../../chunks/Button-995c0178.js";import{T as x,B as ee}from"../../../../chunks/Textfield-477829fd.js";import{T as j,b as te,a as ne,H as le}from"../../../../chunks/db-e7795e52.js";import{D as oe,H as re,C as ae,A as se,T as fe}from"../../../../chunks/Actions-45e9d76d.js";function ie(o){let e;return{c(){e=q("Select a new program")},l(n){e=T(n,"Select a new program")},m(n,t){b(n,e,t)},d(n){n&&d(e)}}}function ce(o){let e,n;return e=new fe({props:{id:"change-title",$$slots:{default:[ie]},$$scope:{ctx:o}}}),{c(){v(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,r){w(e,t,r),n=!0},p(t,r){const i={};r&128&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function ue(o){let e,n,t;function r(a){o[3](a)}let i={label:"Weight",type:"number"};return o[0]!==void 0&&(i.value=o[0]),e=new x({props:i}),I.push(()=>L(e,"value",r)),{c(){v(e.$$.fragment)},l(a){k(e.$$.fragment,a)},m(a,f){w(e,a,f),t=!0},p(a,f){const l={};!n&&f&1&&(n=!0,l.value=a[0],U(()=>n=!1)),e.$set(l)},i(a){t||(m(e.$$.fragment,a),t=!0)},o(a){g(e.$$.fragment,a),t=!1},d(a){y(e,a)}}}function $e(o){let e;return{c(){e=q("Done")},l(n){e=T(n,"Done")},m(n,t){b(n,e,t)},d(n){n&&d(e)}}}function pe(o){let e,n;return e=new H({props:{$$slots:{default:[$e]},$$scope:{ctx:o}}}),e.$on("click",o[4]),{c(){v(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,r){w(e,t,r),n=!0},p(t,r){const i={};r&128&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function _e(o){let e,n,t,r,i,a;return e=new re({props:{$$slots:{default:[ce]},$$scope:{ctx:o}}}),t=new ae({props:{id:"change-content",class:"changed-content",style:`display: flex;
			   flex-direction: column;
		       gap: 1rem;`,$$slots:{default:[ue]},$$scope:{ctx:o}}}),i=new se({props:{$$slots:{default:[pe]},$$scope:{ctx:o}}}),{c(){v(e.$$.fragment),n=D(),v(t.$$.fragment),r=D(),v(i.$$.fragment)},l(f){k(e.$$.fragment,f),n=B(f),k(t.$$.fragment,f),r=B(f),k(i.$$.fragment,f)},m(f,l){w(e,f,l),b(f,n,l),w(t,f,l),b(f,r,l),w(i,f,l),a=!0},p(f,l){const s={};l&128&&(s.$$scope={dirty:l,ctx:f}),e.$set(s);const c={};l&129&&(c.$$scope={dirty:l,ctx:f}),t.$set(c);const u={};l&132&&(u.$$scope={dirty:l,ctx:f}),i.$set(u)},i(f){a||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){y(e,f),f&&d(n),y(t,f),f&&d(r),y(i,f)}}}function me(o){let e=j.formatDifficulty(o[1],o[0])+"",n;return{c(){n=q(e)},l(t){n=T(t,e)},m(t,r){b(t,n,r)},p(t,r){r&3&&e!==(e=j.formatDifficulty(t[1],t[0])+"")&&z(n,e)},d(t){t&&d(n)}}}function ge(o){let e,n,t,r,i;function a(l){o[5](l)}let f={"aria-labelledby":"change-title","aria-describedby":"change-content",$$slots:{default:[_e]},$$scope:{ctx:o}};return o[2]!==void 0&&(f.open=o[2]),e=new oe({props:f}),I.push(()=>L(e,"open",a)),r=new H({props:{color:"secondary",variant:"text",$$slots:{default:[me]},$$scope:{ctx:o}}}),r.$on("click",o[6]),{c(){v(e.$$.fragment),t=D(),v(r.$$.fragment)},l(l){k(e.$$.fragment,l),t=B(l),k(r.$$.fragment,l)},m(l,s){w(e,l,s),b(l,t,s),w(r,l,s),i=!0},p(l,[s]){const c={};s&133&&(c.$$scope={dirty:s,ctx:l}),!n&&s&4&&(n=!0,c.open=l[2],U(()=>n=!1)),e.$set(c);const u={};s&131&&(u.$$scope={dirty:s,ctx:l}),r.$set(u)},i(l){i||(m(e.$$.fragment,l),m(r.$$.fragment,l),i=!0)},o(l){g(e.$$.fragment,l),g(r.$$.fragment,l),i=!1},d(l){y(e,l),l&&d(t),y(r,l)}}}function de(o,e,n){let{value:t}=e,{type:r}=e,i=!1;function a(c){t=c,n(0,t)}const f=()=>n(2,i=!1);function l(c){i=c,n(2,i)}const s=()=>n(2,i=!0);return o.$$set=c=>{"value"in c&&n(0,t=c.value),"type"in c&&n(1,r=c.type)},[t,r,i,a,f,l,s]}class he extends Q{constructor(e){super(),X(this,e,de,ge,Y,{value:0,type:1})}}function G(o,e,n){const t=o.slice();return t[8]=e[n],t[9]=e,t[10]=n,t}function J(o,e,n){const t=o.slice();t[11]=e[n],t[14]=n;const r=t[8].plannedSets[t[14]];return t[12]=r,t}function be(o){let e;return{c(){e=q("Finish")},l(n){e=T(n,"Finish")},m(n,t){b(n,e,t)},d(n){n&&d(e)}}}function ve(o){let e,n;return e=new H({props:{$$slots:{default:[be]},$$scope:{ctx:o}}}),e.$on("click",o[2]),{c(){v(e.$$.fragment)},l(t){k(e.$$.fragment,t)},m(t,r){w(e,t,r),n=!0},p(t,r){const i={};r&32768&&(i.$$scope={dirty:r,ctx:t}),e.$set(i)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){y(e,t)}}}function K(o){let e,n,t,r,i,a=o[8].completedSets,f=[];for(let s=0;s<a.length;s+=1)f[s]=M(J(o,a,s));const l=s=>g(f[s],1,1,()=>{f[s]=null});return t=new H({props:{color:"secondary",variant:"unelevated",class:"btn-round",$$slots:{default:[we]},$$scope:{ctx:o}}}),{c(){e=E("div");for(let s=0;s<f.length;s+=1)f[s].c();n=D(),v(t.$$.fragment),r=D(),this.h()},l(s){e=W(s,"DIV",{class:!0});var c=C(e);for(let u=0;u<f.length;u+=1)f[u].l(c);n=B(c),k(t.$$.fragment,c),r=B(c),c.forEach(d),this.h()},h(){F(e,"class","row svelte-1vflaq3")},m(s,c){b(s,e,c);for(let u=0;u<f.length;u+=1)f[u].m(e,null);A(e,n),w(t,e,null),A(e,r),i=!0},p(s,c){if(c&2){a=s[8].completedSets;let $;for($=0;$<a.length;$+=1){const p=J(s,a,$);f[$]?(f[$].p(p,c),m(f[$],1)):(f[$]=M(p),f[$].c(),m(f[$],1),f[$].m(e,n))}for(V(),$=a.length;$<f.length;$+=1)l($);R()}const u={};c&32768&&(u.$$scope={dirty:c,ctx:s}),t.$set(u)},i(s){if(!i){for(let c=0;c<a.length;c+=1)m(f[c]);m(t.$$.fragment,s),i=!0}},o(s){f=f.filter(Boolean);for(let c=0;c<f.length;c+=1)g(f[c]);g(t.$$.fragment,s),i=!1},d(s){s&&d(e),Z(f,s),y(t)}}}function ke(o){let e=(o[11]==0?o[12]:o[11])+"",n;return{c(){n=q(e)},l(t){n=T(t,e)},m(t,r){b(t,n,r)},p(t,r){r&2&&e!==(e=(t[11]==0?t[12]:t[11])+"")&&z(n,e)},d(t){t&&d(n)}}}function M(o){let e,n;function t(){return o[4](o[8],o[14],o[12],o[11],o[9],o[10])}return e=new H({props:{color:o[11]==0?"secondary":"primary",variant:"unelevated",class:"btn-round",$$slots:{default:[ke]},$$scope:{ctx:o}}}),e.$on("click",t),{c(){v(e.$$.fragment)},l(r){k(e.$$.fragment,r)},m(r,i){w(e,r,i),n=!0},p(r,i){o=r;const a={};i&2&&(a.color=o[11]==0?"secondary":"primary"),i&32770&&(a.$$scope={dirty:i,ctx:o}),e.$set(a)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){y(e,r)}}}function we(o){let e;return{c(){e=q("+")},l(n){e=T(n,"+")},m(n,t){b(n,e,t)},d(n){n&&d(e)}}}function O(o){let e,n,t=o[8].exercise.name+"",r,i,a,f,l,s,c;function u(_){o[3](_,o[8])}let $={type:o[8].exercise.type};o[8].difficulty!==void 0&&($.value=o[8].difficulty),a=new he({props:$}),I.push(()=>L(a,"value",u));let p=o[8].exercise.id!="bodyweight"&&K(o);return{c(){e=E("h2"),n=E("span"),r=q(t),i=D(),v(a.$$.fragment),l=D(),p&&p.c(),s=N(),this.h()},l(_){e=W(_,"H2",{class:!0});var h=C(e);n=W(h,"SPAN",{class:!0});var S=C(n);r=T(S,t),S.forEach(d),i=B(h),k(a.$$.fragment,h),h.forEach(d),l=B(_),p&&p.l(_),s=N(),this.h()},h(){F(n,"class","long svelte-1vflaq3"),F(e,"class","svelte-1vflaq3")},m(_,h){b(_,e,h),A(e,n),A(n,r),A(e,i),w(a,e,null),b(_,l,h),p&&p.m(_,h),b(_,s,h),c=!0},p(_,h){o=_,(!c||h&2)&&t!==(t=o[8].exercise.name+"")&&z(r,t);const S={};h&2&&(S.type=o[8].exercise.type),!f&&h&2&&(f=!0,S.value=o[8].difficulty,U(()=>f=!1)),a.$set(S),o[8].exercise.id!="bodyweight"?p?(p.p(o,h),h&2&&m(p,1)):(p=K(o),p.c(),m(p,1),p.m(s.parentNode,s)):p&&(V(),g(p,1,1,()=>{p=null}),R())},i(_){c||(m(a.$$.fragment,_),m(p),c=!0)},o(_){g(a.$$.fragment,_),g(p),c=!1},d(_){_&&d(e),y(a),_&&d(l),p&&p.d(_),_&&d(s)}}}function ye(o){let e,n,t,r;e=new ee({props:{href:"/work",title:o[0].name,$$slots:{default:[ve]},$$scope:{ctx:o}}});let i=o[1],a=[];for(let l=0;l<i.length;l+=1)a[l]=O(G(o,i,l));const f=l=>g(a[l],1,1,()=>{a[l]=null});return{c(){v(e.$$.fragment),n=D();for(let l=0;l<a.length;l+=1)a[l].c();t=N()},l(l){k(e.$$.fragment,l),n=B(l);for(let s=0;s<a.length;s+=1)a[s].l(l);t=N()},m(l,s){w(e,l,s),b(l,n,s);for(let c=0;c<a.length;c+=1)a[c].m(l,s);b(l,t,s),r=!0},p(l,[s]){const c={};if(s&1&&(c.title=l[0].name),s&32768&&(c.$$scope={dirty:s,ctx:l}),e.$set(c),s&2){i=l[1];let u;for(u=0;u<i.length;u+=1){const $=G(l,i,u);a[u]?(a[u].p($,s),m(a[u],1)):(a[u]=O($),a[u].c(),m(a[u],1),a[u].m(t.parentNode,t))}for(V(),u=i.length;u<a.length;u+=1)f(u);R()}},i(l){if(!r){m(e.$$.fragment,l);for(let s=0;s<i.length;s+=1)m(a[s]);r=!0}},o(l){g(e.$$.fragment,l),a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)g(a[s]);r=!1},d(l){y(e,l),l&&d(n),Z(a,l),l&&d(t)}}}function Se(o,e,n){let t,r;{let u=new URL(document.location.href).searchParams;t=u.get("program")||void 0,r=u.get("workout")||void 0}let i=te,a=[];(async()=>{if(!r){console.error("No workout specified"),P("/work");return}const u=await ne.get(r);if(!u){console.error("Workout not found"),P("/work");return}n(0,i=u),n(1,a=await le.fromWorkout(i,t))})();const l=async()=>{await Promise.all(a.map(u=>u.save())),P("/work")};function s(u,$){o.$$.not_equal($.difficulty,u)&&($.difficulty=u,n(1,a))}return[i,a,l,s,(u,$,p,_,h,S)=>n(1,h[S].completedSets[$]=(p+_)%(p+1),a)]}class Ne extends Q{constructor(e){super(),X(this,e,Se,ye,Y,{})}}export{Ne as default};
